{"ast":null,"code":"import _toConsumableArray from\"D:\\\\DeployCSITWEBSITE\\\\csit-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"D:\\\\DeployCSITWEBSITE\\\\csit-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\DeployCSITWEBSITE\\\\csit-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\DeployCSITWEBSITE\\\\csit-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\DeployCSITWEBSITE\\\\csit-website\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';// import Timeline from 'react-image-timeline';\nimport{VerticalTimeline,VerticalTimelineElement}from'react-vertical-timeline-component';import'./style.css';import TimelineTable from'../Tables/Timeline/TimelineTable';import Moment from'moment';import{extendMoment}from'moment-range';var moment=extendMoment(Moment);var TimelineChart=/*#__PURE__*/function(_React$Component){_inherits(TimelineChart,_React$Component);var _super=_createSuper(TimelineChart);function TimelineChart(props){var _this;_classCallCheck(this,TimelineChart);_this=_super.call(this,props);_this.state={movements:[],retrieved:[]};return _this;}_createClass(TimelineChart,[{key:\"getMovements\",value:function getMovements(id){var _this2=this;fetch(\"https://internshipcsit.herokuapp.com/getMovementbyID?IDs=\".concat(id)).then(function(r){return r.json();}).then(function(data){_this2.setState({movements:data});data.forEach(function(x){_this2.getPeople(x.id);});}).catch(function(err){console.log(err);});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getMovements(this.props.UID);}},{key:\"convertSQLDate\",value:function convertSQLDate(startDate1,endDate){var type=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;if(startDate1!==undefined&&endDate!==undefined){var date=new Date(startDate1);var date2=date.toString().split(\" \");var time=date2[4].split(\":\");var date1=new Date(endDate);var date21=date1.toString().split(\" \");var time1=date21[4].split(\":\");var str;if(type===\"header\"){str=time[0]+\":\"+time[1]+\" - \"+time1[0]+\":\"+time1[1];}else{str=date2[2]+\" \"+date2[1]+\", \"+time[0]+\":\"+time[1]+\" - \"+time1[0]+\":\"+time1[1];}return str;}// return date2[1]\n}},{key:\"getPeople\",value:function getPeople(id){var _this3=this;fetch(\"https://internshipcsit.herokuapp.com/getPeopleTiming?IDs=\".concat(id)).then(function(r){return r.json();}).then(function(data){_this3.setState({retrieved:[].concat(_toConsumableArray(_this3.state.retrieved),[data])});}).catch(function(err){console.log(err);});}},{key:\"render\",value:function render(){var _this4=this;var count=0;var events=this.state.movements.map(function(x){var range=moment.range(x.datetimeEntered,x.datetimeLeft);var tableprops;if(_this4.state.retrieved[count]!==undefined){tableprops=_this4.state.retrieved[count].map(function(data){var range2=moment.range(data.datetimeEntered,data.datetimeLeft);var minIntersect=range.intersect(range2).diff('minute');return{name:data.firstName+\" \"+data.lastName,datetime:_this4.convertSQLDate(data.datetimeEntered,data.datetimeLeft),intersectTime:minIntersect+\" min\",intersection:\"\"};});}count+=1;return/*#__PURE__*/React.createElement(VerticalTimelineElement,{className:\"vertical-timeline-element--work\",date:\"Date: \"+_this4.convertSQLDate(x.datetimeEntered,x.datetimeLeft),iconStyle:{background:'rgb(33, 150, 243)',color:'#fff'}},/*#__PURE__*/React.createElement(\"h4\",{className:\"vertical-timeline-element-subtitle\"},x.locationShortaddress),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(TimelineTable,{tableprops:tableprops}));});return/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:\"#FFFFFF\"}},/*#__PURE__*/React.createElement(VerticalTimeline,{layout:\"1-column\"},events));}}]);return TimelineChart;}(React.Component);export default TimelineChart;","map":{"version":3,"sources":["D:/DeployCSITWEBSITE/csit-website/src/Components/Timelines/TimelineChart.js"],"names":["React","VerticalTimeline","VerticalTimelineElement","TimelineTable","Moment","extendMoment","moment","TimelineChart","props","state","movements","retrieved","id","fetch","then","r","json","data","setState","forEach","x","getPeople","catch","err","console","log","getMovements","UID","startDate1","endDate","type","undefined","date","Date","date2","toString","split","time","date1","date21","time1","str","count","events","map","range","datetimeEntered","datetimeLeft","tableprops","range2","minIntersect","intersect","diff","name","firstName","lastName","datetime","convertSQLDate","intersectTime","intersection","background","color","locationShortaddress","backgroundColor","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\n// import Timeline from 'react-image-timeline';\r\nimport { VerticalTimeline, VerticalTimelineElement }  from 'react-vertical-timeline-component';\r\nimport './style.css'\r\nimport TimelineTable from '../Tables/Timeline/TimelineTable'\r\nimport Moment from 'moment';\r\nimport { extendMoment } from 'moment-range';\r\n \r\nconst moment = extendMoment(Moment);\r\n\r\n\r\nclass TimelineChart extends React.Component{\r\n\r\n    constructor(props){\r\n        \r\n        super(props)\r\n        this.state = {\r\n            movements: [],\r\n            retrieved: [],\r\n        }\r\n\r\n    }\r\n\r\n    getMovements(id){\r\n        fetch(`https://internshipcsit.herokuapp.com/getMovementbyID?IDs=${id}`).then(r => r.json()).then(data => {\r\n            this.setState({movements:data})\r\n            data.forEach(x => {\r\n                this.getPeople(x.id)\r\n            })\r\n        }).catch(err => {console.log(err)})\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.getMovements(this.props.UID)\r\n    }\r\n\r\n    convertSQLDate(startDate1, endDate, type = undefined){\r\n        \r\n        if(startDate1 !== undefined && endDate !== undefined){\r\n            var date = new Date(startDate1)\r\n            var date2 = date.toString().split(\" \")\r\n            var time = date2[4].split(\":\")\r\n    \r\n            var date1 = new Date(endDate)\r\n            var date21 = date1.toString().split(\" \")\r\n            var time1 = date21[4].split(\":\")\r\n            \r\n            let str\r\n            if(type === \"header\"){\r\n                str = time[0] + \":\"+ time[1] + \" - \" + time1[0] + \":\" + time1[1]\r\n            }\r\n            else{\r\n                str = date2[2] + \" \" + date2[1] + \", \" + time[0] + \":\"+ time[1] + \" - \" + time1[0] + \":\" + time1[1]\r\n            }\r\n           \r\n            return str\r\n        }\r\n        // return date2[1]\r\n    }\r\n\r\n    getPeople(id)\r\n    {\r\n        fetch(`https://internshipcsit.herokuapp.com/getPeopleTiming?IDs=${id}`).then(r => r.json()).then((data) => {this.setState({ retrieved: [...this.state.retrieved, data]})}).catch(err => {console.log(err)})\r\n    }\r\n\r\n    render(){\r\n\r\n        let count = 0\r\n\r\n        let events = this.state.movements.map(x => {\r\n\r\n            let range = moment.range(x.datetimeEntered, x.datetimeLeft)\r\n\r\n            let tableprops\r\n            if(this.state.retrieved[count] !== undefined){\r\n                tableprops = this.state.retrieved[count].map(data => {\r\n\r\n                    let range2 = moment.range(data.datetimeEntered, data.datetimeLeft)\r\n                    let minIntersect = range.intersect(range2).diff('minute')\r\n\r\n                    return({\r\n                        name: data.firstName + \" \" + data.lastName,\r\n                        datetime: this.convertSQLDate(data.datetimeEntered, data.datetimeLeft),\r\n                        intersectTime: minIntersect + \" min\",\r\n                        intersection: \"\"\r\n                    })\r\n                })\r\n            }\r\n           \r\n            count += 1\r\n            return(\r\n                <VerticalTimelineElement\r\n                    className=\"vertical-timeline-element--work\"\r\n                    date={\"Date: \" + this.convertSQLDate(x.datetimeEntered, x.datetimeLeft)}\r\n                    iconStyle={{ background: 'rgb(33, 150, 243)', color: '#fff' }}>\r\n\r\n                    {/* <h3 className=\"vertical-timeline-element-title\">{x.locationShortaddress}</h3> */}\r\n\r\n                    <h4 className=\"vertical-timeline-element-subtitle\">{x.locationShortaddress}</h4>\r\n                    <br/>\r\n                    <TimelineTable tableprops={tableprops}/>\r\n                </VerticalTimelineElement>\r\n            )\r\n        })\r\n\r\n        return(\r\n            <div style={{backgroundColor:\"#FFFFFF\"}}>\r\n                <VerticalTimeline layout=\"1-column\">\r\n                    {events}\r\n                </VerticalTimeline>\r\n            </div>\r\n        )\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default TimelineChart"]},"metadata":{},"sourceType":"module"}